"use strict";var _dcq=_dcq||[],_dcs=_dcs||{};_dcs.account=5598225,function(){var t=document.createElement("script"),s=(t.type="text/javascript",t.async=!0,t.src="//tag.getdrip.com/"+_dcs.account+".js",document.getElementsByTagName("script")[0]);s.parentNode.insertBefore(t,s)}(),function(r){function d(e,i,a){var t,s,n,o;a++,i.length>a&&i[a]?(n=i[a].log||"",o=Math.max(5,Math.round(100/i.length*a)),e.find(".atss-import-progress-label").html(n),e.find(".atss-import-progress-sublabel").html(o+"%"),e.find(".atss-import-progress-indicator").attr("style","--atss-indicator: "+o+"%;"),n=window.atss_localize.nonce,o=e.find('input[name="demo_id"]').val(),t=e.find('input[name="builder_type"]:checked').val(),s=e.find('input[name="content_type"]:checked').val(),delete(n=r.extend({nonce:n,demo_id:o,builder_type:t,content_type:s},i[a])).log,delete n.priority,r.post(window.atss_localize.ajax_url,n,function(t){var s;t.success?(t.status&&"newAJAX"===t.status&&a--,setTimeout(function(){d(e,i,a)},500)):(t.data?(e.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),e.find(".atss-import-error-log").html(t.data)):(s=window.atss_localize.i18n.import_failed,t&&(s+='<div class="atss-import-error-response">'+_.escape(t)+"</div>"),e.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),e.find(".atss-import-error-log").html(s)),p.removeClass("atss-import-in-progress"))}).fail(function(){e.find(".atss-import-step-error").addClass("atss-active").siblings().removeClass("atss-active"),e.find(".atss-import-error-log").html(window.atss_localize.i18n.import_failed),p.removeClass("atss-import-in-progress")})):(e.find(".atss-import-progress-label").html(window.atss_localize.i18n.import_finished),e.find(".atss-import-progress-sublabel").html("100%"),e.find(".atss-import-progress-indicator").attr("style","--atss-indicator: 100%;"),o=window.atss_localize.i18n.tweet_text.replace("{0}",m),e.find(".atss-import-finish-tweet-text").html(o),e.find(".atss-import-finish-tweet-button").attr("href","https://twitter.com/intent/tweet?text="+o),setTimeout(function(){e.find(".atss-import-step").removeClass("atss-active"),e.find(".atss-import-step-finish").addClass("atss-active"),p.removeClass("atss-import-in-progress")},250),c.addClass("atss-demo-item-imported").siblings().removeClass("atss-demo-item-imported"),clearInterval(l),m=1),f=!0}var l,c,p=r("body"),m=1,f=!1;r(document).ready(function(){var a,i,n,t=r(".atss-notice"),o=(t.length&&t.find(".notice-dismiss").on("click",function(){t.parent().hide(),r.post(window.atss_localize.ajax_url,{action:"atss_dismissed_handler",nonce:window.atss_localize.nonce})}),r(".atss"));o.length&&(a=o.find(".atss-demo-item"),o.find(".atss-import"),i=o.find(".atss-preview"),o.on("click",".atss-demo-preview-button",function(t){t.preventDefault();var s,t=r(this),e=t.closest(".atss-demo-item"),t={preview:t.attr("href"),info:e.find(".atss-demo-info").html(),actions:e.find(".atss-demo-actions").html()};p.hasClass("atss-preview-show")?(i.find(".atss-preview-iframe").attr("src",t.preview),i.find(".atss-preview-header-info").html(t.info),i.find(".atss-preview-header-actions").html(t.actions)):(s=wp.template("atss-preview"),i.html(s(t))),p.addClass("atss-preview-show"),n=e.index(),o.trigger("atss-nav-click",[n])}),o.on("click",".atss-preview-header-arrow-prev",function(t){t.preventDefault(),r(this).hasClass("atss-disabled")||(n--,a.eq(n).find(".atss-demo-preview-button").trigger("click"))}),o.on("click",".atss-preview-header-arrow-next",function(t){t.preventDefault(),r(this).hasClass("atss-disabled")||(n++,a.eq(n).find(".atss-demo-preview-button").trigger("click"))}),o.on("click",".atss-preview-cancel-button",function(t){t.preventDefault(),p.removeClass("atss-preview-show"),i.empty()}),o.on("atss-nav-click",function(t,s){var e=o.find(".atss-preview-header-arrow-prev"),i=o.find(".atss-preview-header-arrow-next");(0===s?(e.addClass("atss-disabled"),i):(a.length-1===s?i.addClass("atss-disabled"):i.removeClass("atss-disabled"),e)).removeClass("atss-disabled")}),o.on("click",".atss-import-open-button",function(t){t.preventDefault();var t=r(this).data("demo-id"),s=window.atss_localize.demos[t],e=wp.template("atss-import");s&&s.builders.length&&(c=r(this).closest(".atss-demo-item"),s.args={},s.args.demoId=t,s.args.quick=r(this).data("quick")||s.builders.length<2||!1,s.args.builder=r(this).data("builder")||s.builders[0],s.args.imported=window.atss_localize.imported||f,o.find(".atss-import").html(e(s)),p.addClass("atss-import-show"))}),o.on("click",".atss-import-close-button",function(t){t.preventDefault(),p.removeClass("atss-import-show")}),o.on("click",".atss-import-toggle-button",function(t){t.preventDefault(),r(this).parent().toggleClass("atss-active")}),o.on("click",".atss-import-prev-button",function(t){t.preventDefault();t=r(this).closest(".atss-import-step");t.removeClass("atss-active"),t.prev().addClass("atss-active")}),o.on("click",".atss-import-next-button",function(t){t.preventDefault();t=r(this).closest(".atss-import-step");t.removeClass("atss-active"),t.next().addClass("atss-active")}),o.on("change",".atss-import-builder-select input",function(t){var s;o.find(".atss-import-plugin-builder").addClass("atss-hidden"),o.find(".atss-import-plugin-builder input").prop("checked",!1),r(this).is(":checked")&&((s=o.find(".atss-import-plugin-"+r(this).data("builder-plugin"))).removeClass("atss-hidden"),s.find("input").prop("checked",!0))}),o.on("click",".atss-import-with-content-type",function(){var t=!0;r(".atss-import-with-content-type").each(function(){r(this).is(":checked")||(t=!1)}),t?o.find(".atss-import-content-select").removeClass("atss-hidden"):o.find(".atss-import-content-select").addClass("atss-hidden")}),o.on("click",".atss-import-start-button",function(t){t.preventDefault();t=o.find(".atss-import-form");if(r(this).data("subscribe")){var s=t.find(".atss-import-subscribe-field-email"),e=s.val();if(!/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))return void s.addClass("atss-error").attr("placeholder",window.atss_localize.i18n.invalid_email).val("");_dcq.push(["identify",{email:e,tags:[window.atss_localize.theme_name]}])}var s=r(this).closest(".atss-import-step"),i=(s.removeClass("atss-active"),s.next().addClass("atss-active"),[]);t.find("input[data-action]").each(function(t){(r(this).is(":checked")||r(this).is('[type="hidden"]'))&&i.push(r(this).data())}),i=i.sort(function(t,s){return t.priority-s.priority}),m=1,l=setInterval(function(){m++},1e3),p.addClass("atss-import-in-progress"),d(t,i,-1)}))})}(jQuery);